{% extends 'blog/base.html' %}
{% load static %}

{% block page_title %} All My Posts {% endblock page_title %}
{% block css_link %} <link rel="stylesheet" href="{% static 'blog/all-posts.css' %}"> {% endblock css_link %}


{% block content %}

 
    <div class="row my-5">
      
        <!-- All Posts -->
        
        <!-- Search for small screens -->
        <form action="{% url 'search-tru-posts' %}" method="get" class="search-form text-center d-block d-lg-none">
            <input type="search" class="search-btn" name="q" id="" placeholder="Search For Posts or Author">
            <button type="submit" class="btn"><i class="bi bi-search"></i></button>
        </form>
        <!-- --------- -->

        <h4> <small> {{post_category | truncatewords:20 }} </small> </h4>


        <!-- All posts for get and post methods-->
        <div class="row mt-5">
            {% if requested_posts.exists == False %}

                <hr>
                <strong class="text-danger mb-3 d-block"> Sorry did not find posts relating to <del>{{query}}</del>  </strong>
                <span class="d-block fw-bold">Try:</span>
                <ul class="mt-3 mb-5 " style="list-style-type: none;">
                    <li>Make sure words are spelt correctly.</li>
                    <li> Try Searching for keywords rather than contents. </li>

                </ul>
                <hr>

                <h4 class="mb-5">View other posts:</h4>
            {% endif %}

            {% for post in all_posts %}
                <div class="col-12 col-lg-4">
                    <div class="my-card">

                        <div class="img">
                            <a href="{% url 'post-detail-page' post.slug %}">
                                <img src="{{post.image.url}}" alt="{{post.title}}" srcset="">
                            </a>
                        </div>

                        <div class="contents">
                            <a class="blog-title" href="{% url 'post-detail-page' post.slug %}"> {{post.title}} </a>

                            <div class="blog-info row">

                                
                            

                                <div class="col main-info"> 
                                    <i class="bi bi-clock"></i> 
                                    <span> {{post.date}} </span>
                                </div>


                            </div>
                            
                            <div class="blog-preview">
                                <p> {{post.excerpt}} </p>
                            </div>

                            <a href="{% url 'post-detail-page' post.slug %}"> <button class="btn btn-primary p-3 mt-2">  Read More  </button> </a>

                        </div>

                    </div>
                </div>
            {% endfor %}

            
        </div>

        <!-- Side Bar
        <div class="col-12 col-lg-4 ps-3 ps-lg-5 side-bar">

            <form action="{% url 'search-tru-posts' %}" method="get" class="search-form d-none d-lg-block">
                <input type="search" class="search-btn" name="q" id="" placeholder="Search For Posts or by Author">
                <button type="submit" class="btn"><i class="bi bi-search"></i></button>
            </form>

            <div class="categories-sec">
                <span>Categories:</span>
                <div class="categories">
                    <a href="{% url 'posts-page' %}" class="text-dark" style="text-decoration: none;"> <div class="category"> All posts </div> </a>
                    {% for tag in tags %}
                        <a href="{% url 'post-on-tag' tag %}" class="text-dark" style="text-decoration: none;"> <div class="category"> {{tag}} </div> </a>
                    {% endfor %}
                </div>
            </div>


            Sidebar posts
            <div class="my-3">
                <span style="font-size: 20px;"> Posts:</span>

                {% for post in other_posts %}
                    
                    <div class="posts">
                        <div>
                            <a href="{%  url 'post-detail-page' post.slug  %}"> <img src="{{post.image.url}}" alt=""> </a>
                        </div>

                        <div>
                            <a href="{%  url 'post-detail-page' post.slug  %}" style="text-decoration: none;"> <span class="fw-bold"> {{post.title}} </span> </a>
                            <span>{{post.date}}</span>
                        </div>
                    </div>

                {% endfor %}
             </div>  
            
        </div> -->

    </div>
        

{% endblock content %}
